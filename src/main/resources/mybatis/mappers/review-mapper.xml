<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.apiserver.mappers.ReviewMapper" >


    <resultMap id="order_product_resultMap" type="com.apiserver.dto.ProductDTO" autoMapping="true">
        <id property="no" column="p_no" />
        <result property="orderProductNo" column="op_no" />
        <result property="amount" column="op_amount" />
    </resultMap>

    <select id="get_order_product" resultMap="order_product_resultMap">
        SELECT
        * ,
        op.no as op_no,
        p.no as p_no,
        op.amount as op_amount
        FROM `order` o
        inner join order_product op
        on o.order_id = op.order_id
        inner join product p
        on op.product_no = p.no
        where o.user_id = #{userId};
    </select>

</mapper>